@model RVNLMIS.Models.LoginModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
    <script>
        window.OneSignal = window.OneSignal || [];
        OneSignal.push(function () {
            OneSignal.init({
                appId: '@System.Configuration.ConfigurationManager.AppSettings["webPushAppId"]',
            });
        });
    </script>
    <title>RVNL MIS - Powered by PrimaBI</title>
    <!-- HTML5 Shim and Respond.js IE11 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 11]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="keywords" content="">
    <meta name="author" content="PrimaBI" />
    <!-- Font Awesome -->
    <link rel="icon" href="~/Content/assets/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Font Awesome -->
    @* Required Css Files *@
    <link href="~/Content/assets/css/plugins/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/assets/css/mdb.min.css" rel="stylesheet" />
    <link href="~/Content/assets/css/login.css" rel="stylesheet" />
    <link href="~/Content/JQueryNotify/css/notify.css" rel="stylesheet" />
    <style>
        .card-header {
            background-color: rgba(245, 243, 243, 0.03) !important;
            border-bottom: 1px solid rgba(0,0,0,.125);
        }


        .card-title {
            margin-bottom: 2rem;
        }

        .card-header {
            background-color: rgba(245, 243, 243, 0.03) !important;
            border-bottom: none;
        }

        .login_btn {
            font-size: 16px;
            line-height: 1px;
        }

        .theme-saperator {
        }
        /*---------------------------------------------------------------------*/
        .loginwrapper {
            position: absolute;
            top: 10%;
        }

        .loginbody .bgvector {
            position: absolute;
            width: 100%;
        }

            .loginbody .bgvector img {
                width: 100%;
                height: 90vh;
            }

        .loginvector {
            position: absolute;
            right: 0;
            top: 0;
            z-index: 100;
        }

        .loginwrapper .card {
        }

        footer {
            position: absolute;
            bottom: 0;
            padding: 2%;
            color: #fff;
            width: 100%;
            text-align: center;
            font-size: 15px;
        }

            footer i {
                font-size: 15px;
                vertical-align: middle;
            }

            footer i, footer b, footer span {
                margin: 0 2%;
            }

                footer span a {
                    color: #fff;
                }

                    footer span a:hover {
                        color: #f7f7f7;
                    }
    </style>

    @* LOADER *@
    <link href="~/Content/assets/css/loader.css" rel="stylesheet" />
    @* /LOADER *@
</head>
<body class="loginbody">
    <div style="display:none" class="se-pre-con"></div>





    <div class="bgvector">
        <img src="~/Content/assets/images/login/bgvector.jpg" alt="backgeound vector" />
    </div>
    <div class="loginvector">
        <img src="~/Content/assets/images/login/primabilogo.png" alt="loginvector" />
    </div>

    <div class="row">

        <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5 offset-md-7 loginwrapper">

            <div class="card">

                <div class="card-header text-center">
                    <div class="rvnl_logo">
                        <img src="~/Content/assets/images/logo/RVNL_logo.png" alt="RVNL Logo" />
                    </div>
                </div>
                <div class="card-body">
                    <p class="card-title h5">Login</p>
                    @*<hr class="theme-saperator"/>*@


                    <!-- Default form login -->
                    @using (Ajax.BeginForm("Login", "Login", null, new AjaxOptions { HttpMethod = "Post", OnBegin = "onLoginBegin", OnSuccess = "LoginSuccess" }, new { @class = "form", Page = "loginform" }))
                    {
                        @Html.HiddenFor(model => model.returnUrl)

                        <!-- Email -->
                        <label class="login-label">Username</label>
                        <div class="input-group">
                            @*<input type="text" id="defaultLoginFormUser" class="form-control" placeholder="Username" required="">*@
                            @Html.EditorFor(model => model.Username, new { htmlAttributes = new { @class = "form-control full-width", @placeholder = "Username", @type = "text" } })
                            @Html.ValidationMessageFor(model => model.Username, "", new { @class = "text-danger " })
                        </div>
                        <!-- Password -->
                        <label class="login-label active  mt-4">Password</label>
                        @*<input type="password" id="defaultLoginFormPassword" class="form-control mb-4" placeholder="Password" required="">*@
                        <div class="input-group">
                            @Html.EditorFor(model => model.Password, new
                       {
                           htmlAttributes = new
                           {
                               @class = "form-control",
                               @type = "password",
                               @placeholder = "Password",
                               @aria_label = "Recipient's username",
                                    @aria_describedby = "basic-addon2"
                           }
                       })
                            <div onmouseover="mouseoverPass();" onmouseout="mouseoutPass();" class="input-group-append">
                                <i class="fa fa-eye input-group-text"></i>
                            </div>

                        </div>
                        @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger mb-3" })





                        <div class="d-flex justify-content-around mt-4">
                            <div>
                                <!-- Remember me -->
                                <div class="custom-control custom-checkbox">
                                    @*<input type="checkbox" class="custom-control-input" id="defaultLoginFormRemember">*@
                                    @Html.CheckBoxFor(model => model.RememberMe, new
                        {

                        @class = "custom-control-input",

                        })
                                    <label class="custom-control-label" for="RememberMe">Remember me</label>
                                </div>
                            </div>
                            <div class="forgotlink">
                                <!-- Forgot password -->
                                <!-- Button trigger modal -->
                                @*<a type="button" data-toggle="modal" data-target="#exampleModal">
                                        Forgot Password ?
                                    </a>*@
                                @*<a id="ForgetPwd" href="javascript:void(0)" class="login-forgot pull-right">Forgot password?</a>*@
                                <a href="" data-toggle="modal" data-target="#exampleModal">
                                    Forgot Password ?
                                </a>
                                <!-- Modal -->


                            </div>
                        </div>

                        <!-- Sign in button -->
                        <button id="btnLogin" class="btn btn-md btn-theme my-4 full-width btnLogin" type="submit" style="text-transform: inherit;">
                            <span class="login_btn">Login</span>
                        </button>
                    }
                    <!-- Default form login -->
                </div>
            </div>
        </div>
        
    </div>
    <footer>
        <div class="row">
            <div class="col-md-4">
                <i class="fab fa-whatsapp"></i> <b> WhatsApp Support </b> : <span> <a href="https://api.whatsapp.com/send?phone=+1309316-7771"> +1 (309) 316-7771 </a> </span>
            </div>
            <div class="col-md-3">
                <i class="fas fa-phone-alt"></i>    <b> call support </b> : <span> <a href="tel:+900300400">7814908909</a>  </span>                
            </div>
            <div class="col-md-5">
                <i class="fas fa-envelope"></i>    <b> Email Support </b> : <span> <a href="https://mail.google.com/mail/?view=cm&fs=1&to=support@primabi.com"> support@primabi.com </a></span>
            </div>
        </div>
    </footer>



    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">Forgot Password</h5>
                    <button id="btnCloseDelete" type="button" class="close btn-xs " data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>

                </div>
                <form>
                    <div class="modal-body">
                        <label class="login-label active  mt-1"><b>Email</b></label>
                        <div class="input-group full-width pull-left m-b-30">
                            <!-- Email -->

                            <input type="email" id="txtEmailid" class="form-control mb-4" placeholder="Email Id" required="">

                            <div class="col-12">
                                <span class="field-validation-valid text-danger" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success btn-sm delete-confirm" id="btnVerifyConfirm"><i class="fa fa-check"></i>&nbsp;Verify</button>
                        <button class="btn btn-danger btn-sm" data-dismiss="modal"><i class="fa fa-times"></i>&nbsp;Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    @* Required Js Files *@
    <script src="~/Content/assets/js/jquery.min.js"></script>
    <script src="~/Content/assets/js/plugins/bootstrap.min.js"></script>

    <script src="~/Content/JQueryNotify/js/notify.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/Content/assets/js/mdb.min.js"></script>
    @*  *@

    @* LOADER *@
    <script src="~/Content/assets/js/loader.js"></script>
    @* /LOADER *@
    <script>
        //var playerId = '';
        //$('.btnLogin').prop('disabled', true);
        //function OneSignalCall() {
        //    window.OneSignal = window.OneSignal || [];
        //    OneSignal.push(function () {
        //        /* These examples are all valid */
        //        OneSignal.isPushNotificationsEnabled().then(function (isEnabled) {
        //            if (isEnabled) {
        //                OneSignal.getUserId().then(function (userId) {
        //                    // console.log("OneSignal User ID:", userId);
        //                    playerId = userId;
        //                    $.post('/Login/SetPlayerId', { playerId: userId },
        //                        function (returnedData) {
        //                            console.log(returnedData);
        //                        });
        //                    console.log("player:" + userId);
        //                });
        //                $('.btnLogin').prop('disabled', false);
        //            }
        //            else
        //                console.log("Push notifications are not enabled yet.");
        //            $('.btnLogin').prop('disabled', false);
        //        });
        //    });

        //}
        //$(document).ready(function () {
        //    // we call the function

        //    OneSignalCall();
        //});
        function onLoginBegin() {
            // Disable the button and hide the other image here
            // or you can hide the whole div like below
            $(".se-pre-con").show();
        }
        function LoginSuccess(data) {
            if (data == "1") {
                $(".se-pre-con").hide();
                $.notify('Login Credentials Are Invalid ', { align: "left", verticalAlign: "top", type: "success", background: "#ff0000", color: "#fff" });

            } else if (data == "-1") {
                $(".se-pre-con").hide();
                $.notify('Technical Error Please Try Again Later', { align: "left", verticalAlign: "top", type: "success", background: "#fcdc4c", color: "#08212c" });

            } else if (data == "0") {
                //window.location.href = '/DashboardReports/GetId/1';
                var param = '/DashboardReports/Index?id=' + encodeURIComponent('?id=1');
                window.location.href = param;
            }
            else if (data == "2") {
                window.location.href = "/PackageView/Index";
            }
            else if (data == "3") {
                $(".se-pre-con").hide();
                $.notify('Your subscription is inactive or expired.', { align: "left", verticalAlign: "top", type: "success", background: "#fcdc4c", color: "#08212c" });

            }
            else if (data == "5") {
                window.location.href = "/ContactDetails/Index";
            }
            else if (data == "6") {
                window.location.href = "/DataIssueReport/Index";
            }
            else {
                window.location.href = data;
            }

        }

        $('#txtEmailid').on('keypress', function () {
            var email = $("#txtEmailid").val();
            var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
            if (!expr.test(email)) {
                $('#error').show();
            } else {
                $('#error').hide();
            }
        });

        //$("#ForgetPwd").on("click", function () {
        //    $("#modalVerify").modal({ backdrop: 'static', keyboard: false, position: 'center' });
        //});

        $(document).ready(function () {
            $("#btnVerifyConfirm").on("click", function () {
                if ($('#txtEmailid').val() == "") {
                    $.notify('Email address is required', { align: "right", verticalAlign: "top", type: "success", background: "#ff0000", color: "#fff" });

                } else {
                    $.ajax({
                        //url: '/login/VerifyEmail/',
                        url: '/login/VerifyEmail',
                        data: '{email: "' + $('#txtEmailid').val() + '" }',
                        //data: '{std: ' + JSON.stringify(std) + '}',
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function () {
                            //Refresh Kendo Grid
                            $("#modalVerify").modal('hide');
                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            //ShowErrorMessage('Error deleting Project!');
                        }
                    });
                }
            });

        });

        function mouseoverPass() {
            var obj = document.getElementById('Password');
            obj.type = "text";
        }

        function mouseoutPass() {
            var obj = document.getElementById('Password');
            obj.type = "password";
        }
    </script>
</body>
</html>









