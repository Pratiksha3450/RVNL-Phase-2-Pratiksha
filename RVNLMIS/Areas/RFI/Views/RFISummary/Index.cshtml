@model RVNLMIS.Areas.RFI.Models.RFIcountSummary

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/RFI/Views/Shared/_RFIFilteredLayout.cshtml";
}

<style>
</style>

<!-- page contents -->
<div class="card card-body p-5">
    <div class="row">
        <div class="col-md-4">
            <div class="form-group fill" data-select2-id="32" id="userscontainer">
                <label for="inputPassword4">Select User</label>
                @(Html.Kendo().DropDownList().Popup(p => p.AppendTo("#userscontainer"))
                                                                                                                                                                                                                                                                                                           .Name("RFIUserID")
                                                                                                                                                                                                                                                                                                           .DataTextField("Name")
                                                                                                                                                                                                                                                                                                           .DataValueField("ID")
                                                                                                                                                                                                                                                                                                           .HtmlAttributes(new { style = "width:100%", @class = "form-control" })
                                                                                                                                                                                                                                                                                                           .Filter("contains").OptionLabel("Select User")
                                                                                                                                                                                                                                                                                                           .DataSource(source =>
                                                                                                                                                                                                                                                                                                           {
                                                                                                                                                                                                                                                                                                               source.Read(read =>
                                                                                                                                                                                                                                                                                                               {
                                                                                                                                                                                                                                                                                                                   read.Action("Get_Userslist", "RFISummary");
                                                                                                                                                                                                                                                                                                               })
                                                                                                                                                                                                                                                                                                               .ServerFiltering(true);
                                                                                                                                                                                                                                                                                                           })
                )
            </div>
        </div>
    </div>

    <div id="partialCount">
        @Html.Partial("_PartialRFICount", Model)
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#RFIUserID").change(function (e) {
            var userId = $("#RFIUserID").data("kendoDropDownList").value();
            console.log(userId);
            e.preventDefault();
            var url = "/RFI/RFISummary/Get_RFICount/" + userId;
            $.get(url, function (data) {
                $("#partialCount").html(data);
            });
        });
    });
</script>
