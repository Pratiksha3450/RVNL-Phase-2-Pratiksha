@model RVNLMIS.Models.LoginModel
@{
    ViewBag.Title = "RVNL MIS";
    Layout = null;
}


<!DOCTYPE html>
<html lang="en">

<head>
    <title>Lock Screen</title>
    <!-- Favicon icon -->
    <link rel="icon" href="~/Content/assets/images/favicon.ico" type="image/x-icon">
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
    <!-- Required Fremwork -->
    <link href="~/Content/assets/css/plugins/bootstrap.min.css" rel="stylesheet" />
    <!-- waves.css -->

    <link href="~/Content/assets/css/waves.min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="~/Content/assets/css/feather.css" rel="stylesheet" />
    <!-- themify-icons line icon -->
    <link href="~/Content/assets/css/themify-icons.css" rel="stylesheet" />
    <!-- ico font -->

    <link href="~/Content/assets/css/icofont.css" rel="stylesheet" />
    <!-- Font Awesome -->
    <link href="~/Content/assets/css/font-awesome.min.css" rel="stylesheet" />

    <!-- Style.css -->

    <link href="~/Content/assets/css/style.css" rel="stylesheet" />
    <link href="~/Content/assets/css/lockscreen.css" rel="stylesheet" />

    <link href="~/Content/assets/css/theme.css" rel="stylesheet" />
    <link href="~/Content/assets/css/pages.css" rel="stylesheet" />
    <link href="~/Content/JQueryNotify/css/notify.css" rel="stylesheet" />
    <style>
        .form-control {
            width: 94% !important;
            display: inline-block;
        }
    </style>
</head>

<body themebg-pattern="theme1" class="lockscreen">

    <!-- Pre-loader start -->
    <div class="theme-loader">
        <div class="loader-track">
            <div class="preloader-wrapper">
                <div class="spinner-layer spinner-blue">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="spinner-layer spinner-red">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>

                <div class="spinner-layer spinner-yellow">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>

                <div class="spinner-layer spinner-green">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Pre-loader end -->
    <section class="login-block">
        <!-- Container-fluid starts -->
        <div class="container">
            <h3 class="text-center text-white mb-5"><i class="fa fa-lock"></i>  Lock Screen</h3>
            <div class="card lockscreenwrapper">
                <div class="card-body">
                    @using (Ajax.BeginForm("UnlockScreen", "Login", null, new AjaxOptions { HttpMethod = "Post", OnSuccess = "LoginLockSuccess" }, new { @class = "form" }))
                    {
                        @Html.HiddenFor(model => model.returnUrl)
                        @Html.HiddenFor(model => model.Username)
                        @Html.HiddenFor(model => model.RememberMe)
                        <div class="row">
                            <div class="col-sm-12 col-md-12 col-lg-12 mb-3 text-center">
                                <img src="~/Content/assets/images/ProfilePic.png" class="profile_pic mb-2">
                                <h4> @Html.DisplayFor(model => model.Username) </h4>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-12 mb-3">
                                <div class="form-group mb-2">
                                    <label class="col-form-label-sm-user text-black-50" for="txtPassword">
                                        Password
                                        @*<span id="passlength" style="display:none;color:red;"> Password should have at least 8 characters.</span>*@
                                    </label>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12">
                                            @Html.EditorFor(model => model.Password, new
                                      {
                                          htmlAttributes = new
                                          {
                                              @class = "form-control form-control-sm",
                                                   @type = "password",
                                                   @placeholder = "Ex: *******",
                                          }
                                      })
                                            @*<input type="Password" class=" form-control form-control-sm" id="txtNewPassword" placeholder="Ex: *******">*@
                                            <span class="viewme" onmouseover="mouseoverPass();" onmouseout="mouseoutPass();"><i class="fa fa-eye"></i></span>
                                        </div>
                                        <div class="col-12">
                                            @Html.ValidationMessageFor(model => model.Password, "", new { @class = "errorrequired text-danger" })
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-12 col-md-12 col-lg-12 mb-3">
                                <button type="submit" class="btn btn-md btn-theme has-ripple" style="width:100%">
                                    SIGN IN
                                </button>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-12 mb-3 text-center">
                                <a style="cursor:pointer" id="btnAnotherUsr" class="" data-url="/Login/DeleteAuthCookies"> Switch User ? </a>
                            </div>
                        </div>
                    }
                </div>
            </div>
            <!-- end of container-fluid -->
    </section>
</body>
</html>

<!-- Required Jquery -->
<script src="~/Scripts/jquery.min.js" type="text/javascript"></script>
<script src="~/Content/assets/js/plugins/jquery-ui.min.js" type="text/javascript"></script>
<script src="~/Content/assets/js/popper.min.js"></script>
<script src="~/Content/assets/js/plugins/bootstrap.min.js" type="text/javascript"></script>
<!-- waves js -->
<script src="~/Content/assets/js/waves.min.js"></script>
<!-- jquery slimscroll js -->
<script src="~/Content/assets/js/jquery.slimscroll.js"></script>
<!-- modernizr js -->
<script src="~/Content/assets/js/modernizr.js"></script>
<script src="~/Content/assets/js/css-scrollbars.js"></script>
<!-- i18next.min.js -->
<script src="~/Content/assets/js/i18next.min.js"></script>
<script src="~/Content/assets/js/i18nextXHRBackend.min.js"></script>
<script src="~/Content/assets/js/i18nextBrowserLanguageDetector.min.js"></script>
<script src="~/Content/assets/js/jquery-i18next.min.js"></script>
<!--Color Script Common-->
<script src="~/Content/JQueryNotify/js/notify.js"></script>
<script src="~/Content/assets/js/common-pages.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>

<script>
    function LoginLockSuccess(data) {
        if (data == "1") {
            $.notify('Login Credentials Are Invalid ', { align: "left", verticalAlign: "top", type: "success", background: "#ff0000", color: "#fff" });
        }
        else if (data == "-1") {
            $.notify('Technical Error Please Try Again Later', { align: "left", verticalAlign: "top", type: "success", background: "#fcdc4c", color: "#08212c" });
        }
        else if (data == "0") {
            //  window.location.href = '/DashboardReports/GetId/1';
            var param = '/DashboardReports/Index?id=' + encodeURIComponent('?id=1');
            window.location.href = param;
        }
        else if (data == "2") {
            var param = $("#returnUrl").val();
            var array = [];
            var returnurl;

            if (param.includes('DashboardReports/Index')) {
                array = param.split('=');
                returnurl = '/DashboardReports/Index?id=' + encodeURIComponent('?id=' + array[2]);
            }
            window.location.href = returnurl;
        }
        else if (data == "3") {
            window.location.href = "/PackageView/Index";
        }
        else if (data == "4") {
            $.notify('Your subscription is inactive or expired.', { align: "left", verticalAlign: "top", type: "success", background: "#fcdc4c", color: "#08212c" });
        }
        else if (data == "5") {
            window.location.href = "/ContactDetails/Index";
        }
        else if (data == "6") {
            window.location.href = "/DataIssueReport/Index";
        }
        else {
            window.location.href = data;
        }

    }

    function mouseoverPass() {
        var obj = document.getElementById('Password');
        obj.type = "text";
    }

    function mouseoutPass() {
        var obj = document.getElementById('Password');
        obj.type = "password";
    }

    $(document).ready(function () {
        $("#btnAnotherUsr").click(function () {
            var url = $(this).data("url");
            $.get(url, function (data) {
                window.location.href = '/Login/Index';
            });
        });
    });
</script>