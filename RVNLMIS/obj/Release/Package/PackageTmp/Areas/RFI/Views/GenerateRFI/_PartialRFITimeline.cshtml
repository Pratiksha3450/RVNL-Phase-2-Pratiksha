@model RVNLMIS.Areas.RFI.Models.RFITimeLineModel
@using RVNLMIS.Models;

@{
    Layout = null;
    //var org = ((UserModel)Session["RFIUserSession"]).RoleCode;
}

<div class="overlay"></div>
<div class="content">
    <div class="card-body">
        <h4 class="mb-2 text-center">Timeline</h4>
        <div class="saperator_multiple_centered"><div class="divider_multiple"></div><div class="divider_green"></div></div>
        <div class="mt-5">
            <h6>@string.Concat(Model.RFICode, " (Rev.", Model.RevisionNo, ")")</h6>
            <h5>
                @Model.PackageName

                @if (Model.CurrentStatus == "Open")
                {
                    <span class="badge badge-light-primary float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }
                else if (Model.CurrentStatus == "Approved by PMC")
                {
                    <span class="badge badge-light-green float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }
                else if (Model.CurrentStatus == "Rejected")
                {
                    <span class="badge badge-light-danger float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }
                else if (Model.CurrentStatus == "Scheduled")
                {
                    <span class="badge badge-light-purple float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }
                else if (Model.CurrentStatus == "Rescheduled")
                {
                    <span class="badge badge-light-orange float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }
                else if (Model.CurrentStatus == "Revise and Resubmit")
                {
                    <span class="badge badge badge-light-brown  float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }
                else if (Model.CurrentStatus == "Approved by RVNL")
                {
                    <span class="badge badge badge-light-gray  float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }
                else
                {
                    <span class="badge badge badge-light-cyan  float-right d-inline-block m-0">@Model.CurrentStatus</span>
                }

                @*                <p class="badge badge-light-success float-right d-inline-block m-0">@Model.CurrentStatus</p>*@
            </h5>
        </div>
        <div class="border-bottom pb-3 pt-3">
            <div class="row">
                @*<div class="col-md-7">
                        <a href="#" class="text-purple close-card"><i class="feather icon-paperclip mr-1"></i> Attachments </a>
                    </div>
                    <div class="col-md-5 text-right">
                        <p class="d-inline-block mb-0"><i class="feather icon-calendar mr-1"></i><label class="mb-0">sat,10/03/2019</label></p>
                    </div>*@
            </div>
        </div>
    </div>

    <!-- [ tinymce editor ] start -->
    <div class="col-sm-12">
        <div class="border-0 shadow-none">
            <div class="task-card">
                <div class="card-body">
                    <ul class="list-unstyled task-list">
                        @foreach (var item in Model.objList)
                        {
                            <li class="p-b-15 m-b-10">
                                @if (@item.StatusClass == "bg-c-green")
                                {
                                    <i class="feather icon-check f-w-600 task-icon bg-c-green"></i>
                                }
                                else
                                {
                                    //if (item.objAttachList == null || item.objAttachList.Count() == 0)
                                    //{
                                    <i class="task-icon @item.StatusClass"></i>
                                    @*}
                                        else
                                        {
                                            <i class="feather icon-paperclip task-icon bg-c-purple mr-1"></i>
                                        }*@
                                }
                                <p class="m-b-5">
                                    @item.TimelineDate.Value.ToString("dd MMM yyyy hh:mm tt")
                                    @if (item.objAttachList == null || item.objAttachList.Count() == 0)
                                    {
                                    }
                                    else
                                    {
                                        <span class="text-right"><i class="feather icon-paperclip text-purple ml-3"></i></span>
                                    }
                                </p>
                                <h6 class="text-muted">
                                    <span>@item.TimelineText</span>
                                </h6>

                                @if (item.objAttachList != null || item.objAttachList.Count() != 0)
                                {
                                    foreach (var pic in item.objAttachList)
                                    {
                                        if (pic.RFIEnclId != 0)
                                        {
                                            <div class="row m-b-25">
                                                <div class="col-auto p-r-0">
                                                    <label class="badge badge-light-danger"><i class="@string.Concat(pic.Icon, " f-50")"></i></label>
                                                </div>
                                                <div class="col">
                                                    <h6> <a href="@Url.Content(pic.Path)" target="_blank">@pic.FileName</a></h6>
                                                    <p class="m-b-0">@pic.EnclType</p>
                                                </div>
                                            </div>
                                        }
                                    }
                                }
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- [ tinymce editor ] end -->
</div>

